<?php 
ini_set('display_errors', 1);
ini_set('display_startup_errors', 1);
error_reporting(E_ALL);

$jsondata = '../json/dashboard_json_test/dashboard_json_test.json';

function fy_year($sql, $fy)
{

    $getyear = mysqli_query($sql, "SELECT * FROM `fy_year`");

    while ($listyear = mysqli_fetch_object($getyear)) {
        echo '<option value="' . $listyear->fy_year . '"';
        if ($listyear->status == 1) {
            echo ' selected="selected" ';
        }
        echo '>' . $listyear->fy_year . '</option>';
    }

}

if (file_exists($jsondata)) { 
    $data = file_get_contents($jsondata);
    $json = json_decode($data);

    $fyyear =  $json[0]->fyear;

    /* Sale YTD Graph */
    //echo "-----------Sale YTD Graph----------".'<br>';
    
    $eastr =  $json[0]->region[0]->region_amount;
    $westr =  $json[0]->region[4]->region_amount;
    $southr =  $json[0]->region[3]->region_amount;
    $northr =  $json[0]->region[2]->region_amount;
    $expr =  $json[0]->region[1]->region_amount;

    $eastl =  $json[0]->region[0]->region_name;
    $westl =  $json[0]->region[4]->region_name;
    $southl =  $json[0]->region[3]->region_name;
    $northl =  $json[0]->region[2]->region_name;
    $expl =  $json[0]->region[1]->region_name;

    
    $graphlabel = "'".$eastl."', '".$westl."', '".$southl."', '".$northl."', '".$expl."'";
    $graphvalue = $eastr.', '.$westr.', '.$southr.', '.$northr.', '.$expr;

    /*echo $graphvalue.'<br>';
    echo $graphlabel;*/

    $totalytd = $eastr + $westr + $southr + $northr + $expr;


    /* Sale QTD Graph */
   // echo '<hr>';
    //echo "-----------Sale YTD Graph----------".'<br>';

    //quarter 1
    $totalqr1 = (($json[0]->region[0]->month[0]->month_amount)+($json[0]->region[0]->month[1]->month_amount)+($json[0]->region[0]->month[2]->month_amount)
    +
    ($json[0]->region[1]->month[0]->month_amount)+($json[0]->region[1]->month[1]->month_amount)+($json[0]->region[1]->month[2]->month_amount)
    +
    ($json[0]->region[2]->month[0]->month_amount)+($json[0]->region[2]->month[1]->month_amount)+($json[0]->region[2]->month[2]->month_amount)
    +
    ($json[0]->region[3]->month[0]->month_amount)+($json[0]->region[3]->month[1]->month_amount)+($json[0]->region[3]->month[2]->month_amount)
    +
    ($json[0]->region[4]->month[0]->month_amount)+($json[0]->region[4]->month[1]->month_amount)+($json[0]->region[4]->month[2]->month_amount)
    );

    //quarter 2

    $totalqr2 = (($json[0]->region[0]->month[3]->month_amount)+($json[0]->region[0]->month[4]->month_amount)+($json[0]->region[0]->month[5]->month_amount)
    +
    ($json[0]->region[1]->month[3]->month_amount)+($json[0]->region[1]->month[4]->month_amount)+($json[0]->region[1]->month[5]->month_amount)
    +
    ($json[0]->region[2]->month[3]->month_amount)+($json[0]->region[2]->month[4]->month_amount)+($json[0]->region[2]->month[5]->month_amount)
    +
    ($json[0]->region[3]->month[3]->month_amount)+($json[0]->region[3]->month[4]->month_amount)+($json[0]->region[3]->month[5]->month_amount)
    +
    ($json[0]->region[4]->month[3]->month_amount)+($json[0]->region[4]->month[4]->month_amount)+($json[0]->region[4]->month[5]->month_amount)
    );


    //quarter 3

    $totalqr3 = (($json[0]->region[2]->month[6]->month_amount)+($json[0]->region[2]->month[7]->month_amount)+($json[0]->region[2]->month[8]->month_amount)+($json[0]->region[3]->month[6]->month_amount)+($json[0]->region[3]->month[7]->month_amount)+($json[0]->region[3]->month[8]->month_amount)+($json[0]->region[0]->month[6]->month_amount)+($json[0]->region[0]->month[7]->month_amount)+($json[0]->region[0]->month[8]->month_amount)+($json[0]->region[4]->month[6]->month_amount)+($json[0]->region[4]->month[7]->month_amount)+($json[0]->region[4]->month[8]->month_amount));

    //quarter 4

    $totalqr4 = (($json[0]->region[0]->month[9]->month_amount)+($json[0]->region[0]->month[10]->month_amount)+($json[0]->region[0]->month[11]->month_amount)
    +
    ($json[0]->region[1]->month[9]->month_amount)+($json[0]->region[1]->month[10]->month_amount)+($json[0]->region[1]->month[11]->month_amount)
    +
    ($json[0]->region[2]->month[9]->month_amount)+($json[0]->region[2]->month[10]->month_amount)+($json[0]->region[2]->month[11]->month_amount)
    +
    ($json[0]->region[3]->month[9]->month_amount)+($json[0]->region[3]->month[10]->month_amount)+($json[0]->region[3]->month[11]->month_amount)
    +
    ($json[0]->region[4]->month[9]->month_amount)+($json[0]->region[4]->month[10]->month_amount)+($json[0]->region[4]->month[11]->month_amount)
    );

    /*echo 'QR1 Total: '.$totalqr1.'<br>';
    echo 'QR2 Total: '.$totalqr2.'<br>';
    echo 'QR3 Total: '.$totalqr3.'<br>';
    echo 'QR4 Total: '.$totalqr4.'<br>';*/

    $eastr =  $json[0]->region[0]->region_amount;
    $westr =  $json[0]->region[4]->region_amount;
    $southr =  $json[0]->region[3]->region_amount;
    $northr =  $json[0]->region[2]->region_amount;
    $expr =  $json[0]->region[1]->region_amount;

    $graphlabel = "'".$eastl."', '".$westl."', '".$southl."', '".$northl."', '".$expl."'";

    




} 
/*else {
    echo 'Json not found';
}*/
?>

